const lastFeedTime=$("#last_feed_time"),temp=$("#temp"),consumptionStatus=$("#consumption"),idealFood=$("#ideal_food"),foodProvided=$("#food_provided"),typeFood=$("#type_food"),lastUmi=document.querySelector("#last_update_umi"),UmiMetric=document.querySelector("#umi_metric"),statusUmi=document.querySelector("#statusUmi"),divstatusUmi=document.querySelector("#div_status_umi"),FoodMetric=document.querySelector("#food_metric");let qtdFoodReservoir=5;function getFood(){let t=new XMLHttpRequest;t.open("GET","https://script.google.com/macros/s/AKfycbwqbhTaPlHCuBSQMZe0j8BhNxFctzfLAcqphMOA_SjRbRbH8kUYjt9gOXuhF1vQfoimCg/exec"),t.send(),t.onload=function(){const e=t.responseText;LastData=e.split(",");const o=parseFloat(LastData[0]).toFixed(2);qtdFoodReservoir=o,update=new Date(LastData[1]),FoodMetric.innerHTML=o;const a=parseInt(100*o/5),s=document.querySelector(".progress-bar");s.style.setProperty("--progress",a),s.dataset.content=a.toString()+"%",document.getElementById("last_update_food").innerHTML=update.getDate()+"/"+(update.getMonth()+1)+" - "+update.getHours()+":"+update.getMinutes()}}function GetData(t){let e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.responseText}function mainGet(){let t=GetData("https://script.google.com/macros/s/AKfycbydn9mZm8pI8Fvu82ruIpr6EzJrWSlPjFUI3Y1qwwDL6zkuiYrIlPPs9P71XCG7QbCJ/exec").split(",");const e=new Date(t[4]);lastFeedTime.text(e.toLocaleDateString()+" - "+e.toLocaleTimeString("pt-BR")),temp.text(": "+t[3]);let o="";const a=parseFloat(t[3]).toFixed(2);a<16&&(o="0%"),a>=16&&a<=19&&(o="60%"),a>=20&&a<=24&&(o="80%"),a>=25&&a<29&&(o="100%"),a>=30&&a<=32&&(o="80%"),a>32&&(o="0%"),consumptionStatus.text(o),idealFood.text(t[0]),foodProvided.text(t[2]),typeFood.text(t[1])}getFood(),mainGet(),setInterval((function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let t=this.responseText;UmiMetric.innerHTML=t,t<=12&&(statusUmi.innerHTML="Umidade ideal da ração",divstatusUmi.classList.add("great_status")),t>12&&t<=14&&(statusUmi.innerHTML="Fique atento! A ração pode começar a mofar",divstatusUmi.classList.add("medium_status")),t>14&&t<=16&&(statusUmi.innerHTML="Alto risco de fungos e micotoxinas na ração. Observe a umidade",divstatusUmi.classList.add("bad_status")),t>16&&(statusUmi.innerHTML="Ração inadequada para o consumo. Realize a troca",divstatusUmi.classList.add("terrible_status"))}},t.open("GET","http://192.168.15.12/temp_value",!0),t.send();var e=new Date;lastUmi.innerHTML=e.toLocaleDateString()+" - "+e.toLocaleTimeString("pt-BR")}),2e3);